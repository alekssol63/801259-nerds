var writeButton=document.querySelector(".write-us"),messageForm=document.querySelector(".message-form"),close=messageForm.querySelector(".modal-close"),userName=messageForm.querySelector("[name=user-name]"),eMail=messageForm.querySelector("[name=e-mail]"),letter=messageForm.querySelector("[name=letter]"),isStorageSupport=!0,storageUserName="",storageEmail="",storageLetter="";function saveData(){isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("eMail",eMail.value),localStorage.setItem("letter",letter.value))}try{storageUserName=localStorage.getItem("userName"),userName.hasAttribute("required")&&userName.removeAttribute("required"),storageEmail=localStorage.getItem("eMail"),eMail.hasAttribute("required")&&eMail.removeAttribute("required"),storageLetter=localStorage.getItem("letter")}catch(e){isStorageSupport=!1}writeButton.addEventListener("click",function(e){e.preventDefault(),messageForm.classList.add("active"),storageUserName?(userName.value=storageUserName,eMail.focus()):userName.focus(),storageEmail?(eMail.value=storageEmail,letter.focus()):eMail.focus(),storageLetter&&(letter.value=storageLetter)}),close.addEventListener("click",function(e){e.preventDefault(),messageForm.classList.remove("active"),messageForm.classList.remove("modal-error"),saveData()}),messageForm.addEventListener("submit",function(e){userName.value&&eMail.value&&letter.value?saveData():(e.preventDefault(),messageForm.classList.remove("modal-error"),messageForm.offsetWidth=messageForm.offsetWidth,messageForm.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),messageForm.classList.contains("active")&&(messageForm.classList.remove("active"),messageForm.classList.remove("modal-error")),saveData())});
